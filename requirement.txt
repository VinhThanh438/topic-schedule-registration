get available mod

get mod schedule
    ^check remaining_lessions (middleware)

user Scheduling

    ^ {
        check duplicate schedule (middleware)
        check available schedule (middleware)
      }
    ^ update user's remaining_lessions (service)
    ^ create and save detail in db (service)

mod Scheduling

mod schedule canceled


mod confirm topic_schedule_room
    ^ update mod_schedule status (event)
        is_available: true -> false 
    ^ change topic_schedule_room
        status: peding -> confirmed
    ^ create room before 2 minutes of starting room (event -queue)

mod cancel topic_schedule_room
    ^ change topic_schedule_room
        status: confirmed || pending -> mod canceled
    ^ refund user's remaining_lessions (event)
      update mod schedule status

* sửa lại auth và validator
* phân biệt mod hủy ca dạy và mod hủy lịch của user
* thêm phần update lại is_available sau khi mod hủy lịch 

* note: (14/8/2024)
- (done) them api mod huy lich + fix transform
- (done - cau hinh tham so, can chuyen vao 
auth cho len header) chuyen check remaining_lessions 
len lam middleware check cho get mod schedule
- (done) findOneAndUpdate khong phai check trong middelware
    (check is_available middleware)
- check start_time
- them schedule job quet lich

If (time) {
    lam them auth hoac cancel de ngay mai
    them validator
}